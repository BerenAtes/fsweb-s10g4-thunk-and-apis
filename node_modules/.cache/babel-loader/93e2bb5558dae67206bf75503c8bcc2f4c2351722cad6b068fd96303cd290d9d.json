{"ast":null,"code":"import { nanoid } from \"nanoid\";\nimport { FAV_ADD, FAV_REMOVE, FETCH_SUCCESS, FETCH_LOADING, FETCH_ERROR, GET_FAVS_FROM_LS } from \"./actions\";\nimport { toast } from \"react-toastify\";\nconst initial = {\n  favs: [],\n  current: \"\",\n  error: \"\",\n  loading: false\n};\nfunction writeFavsToLocalStorage(state) {\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\n}\nfunction readFavsFromLocalStorage() {\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\n}\nexport function myReducer(state = initial, action) {\n  switch (action.type) {\n    case FAV_ADD:\n      for (const iterator of state.favs) {\n        if (iterator.fact === action.payload) return state;\n      }\n      toast.info(\"Favorilere eklendi\");\n      const stateAfterAdd = {\n        ...state,\n        favs: [...state.favs, {\n          id: nanoid(),\n          fact: action.payload\n        }]\n      };\n      writeFavsToLocalStorage(stateAfterAdd);\n      return stateAfterAdd;\n    case FAV_REMOVE:\n      toast.info(\"Favorilerden √ßƒ±kartƒ±ldƒ±\");\n      const stateAfterRemove = {\n        ...state,\n        favs: state.favs.filter(fav => fav.id !== action.payload)\n      };\n      writeFavsToLocalStorage(stateAfterRemove);\n      return stateAfterRemove;\n    case FETCH_SUCCESS:\n      toast.success(\"Kedi Fact'iniz hazƒ±rüêà\");\n      return {\n        ...state,\n        loading: false,\n        current: action.payload\n      };\n    case FETCH_LOADING:\n      return {\n        ...state,\n        loading: true,\n        error: \"\"\n      };\n    case FETCH_ERROR:\n      toast.error(\"Kedi Fact'inizi getiremediküòø\");\n      return {\n        ...state,\n        loading: false,\n        error: action.payload\n      };\n    case GET_FAVS_FROM_LS:\n      const lsFavs = readFavsFromLocalStorage();\n      if (!lsFavs) return state;\n      return {\n        ...state,\n        favs: readFavsFromLocalStorage()\n      };\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["nanoid","FAV_ADD","FAV_REMOVE","FETCH_SUCCESS","FETCH_LOADING","FETCH_ERROR","GET_FAVS_FROM_LS","toast","initial","favs","current","error","loading","writeFavsToLocalStorage","state","localStorage","setItem","JSON","stringify","readFavsFromLocalStorage","parse","getItem","myReducer","action","type","iterator","fact","payload","info","stateAfterAdd","id","stateAfterRemove","filter","fav","success","lsFavs"],"sources":["C:/git/fsweb-s10g4-thunk-and-apis/src/reducers.js"],"sourcesContent":["import { nanoid } from \"nanoid\";\r\n\r\nimport {\r\n  FAV_ADD,\r\n  FAV_REMOVE,\r\n  FETCH_SUCCESS,\r\n  FETCH_LOADING,\r\n  FETCH_ERROR,\r\n  GET_FAVS_FROM_LS,\r\n} from \"./actions\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst initial = {\r\n  favs: [],\r\n  current: \"\",\r\n  error: \"\",\r\n  loading: false,\r\n};\r\n\r\nfunction writeFavsToLocalStorage(state) {\r\n  localStorage.setItem(\"s10g4\", JSON.stringify(state.favs));\r\n}\r\n\r\nfunction readFavsFromLocalStorage() {\r\n  return JSON.parse(localStorage.getItem(\"s10g4\"));\r\n}\r\n\r\nexport function myReducer(state = initial, action) {\r\n  switch (action.type) {\r\n    case FAV_ADD:\r\n      for (const iterator of state.favs) {\r\n        if (iterator.fact === action.payload) return state;\r\n      }\r\n\r\n      toast.info(\"Favorilere eklendi\");\r\n      const stateAfterAdd = {\r\n        ...state,\r\n        favs: [...state.favs, { id: nanoid(), fact: action.payload }],\r\n      };\r\n      writeFavsToLocalStorage(stateAfterAdd);\r\n      return stateAfterAdd;\r\n\r\n    case FAV_REMOVE:\r\n      toast.info(\"Favorilerden √ßƒ±kartƒ±ldƒ±\");\r\n      const stateAfterRemove = {\r\n        ...state,\r\n        favs: state.favs.filter((fav) => fav.id !== action.payload),\r\n      };\r\n      writeFavsToLocalStorage(stateAfterRemove);\r\n      return stateAfterRemove;\r\n\r\n    case FETCH_SUCCESS:\r\n      toast.success(\"Kedi Fact'iniz hazƒ±rüêà\");\r\n      return { ...state, loading: false, current: action.payload };\r\n\r\n    case FETCH_LOADING:\r\n      return { ...state, loading: true, error: \"\" };\r\n\r\n    case FETCH_ERROR:\r\n      toast.error(\"Kedi Fact'inizi getiremediküòø\");\r\n      return { ...state, loading: false, error: action.payload };\r\n\r\n    case GET_FAVS_FROM_LS:\r\n      const lsFavs = readFavsFromLocalStorage();\r\n      if (!lsFavs) return state;\r\n\r\n      return { ...state, favs: readFavsFromLocalStorage() };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAE/B,SACEC,OAAO,EACPC,UAAU,EACVC,aAAa,EACbC,aAAa,EACbC,WAAW,EACXC,gBAAgB,QACX,WAAW;AAElB,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,MAAMC,OAAO,GAAG;EACdC,IAAI,EAAE,EAAE;EACRC,OAAO,EAAE,EAAE;EACXC,KAAK,EAAE,EAAE;EACTC,OAAO,EAAE;AACX,CAAC;AAED,SAASC,uBAAuBA,CAACC,KAAK,EAAE;EACtCC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEC,IAAI,CAACC,SAAS,CAACJ,KAAK,CAACL,IAAI,CAAC,CAAC;AAC3D;AAEA,SAASU,wBAAwBA,CAAA,EAAG;EAClC,OAAOF,IAAI,CAACG,KAAK,CAACL,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC,CAAC;AAClD;AAEA,OAAO,SAASC,SAASA,CAACR,KAAK,GAAGN,OAAO,EAAEe,MAAM,EAAE;EACjD,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAKvB,OAAO;MACV,KAAK,MAAMwB,QAAQ,IAAIX,KAAK,CAACL,IAAI,EAAE;QACjC,IAAIgB,QAAQ,CAACC,IAAI,KAAKH,MAAM,CAACI,OAAO,EAAE,OAAOb,KAAK;MACpD;MAEAP,KAAK,CAACqB,IAAI,CAAC,oBAAoB,CAAC;MAChC,MAAMC,aAAa,GAAG;QACpB,GAAGf,KAAK;QACRL,IAAI,EAAE,CAAC,GAAGK,KAAK,CAACL,IAAI,EAAE;UAAEqB,EAAE,EAAE9B,MAAM,CAAC,CAAC;UAAE0B,IAAI,EAAEH,MAAM,CAACI;QAAQ,CAAC;MAC9D,CAAC;MACDd,uBAAuB,CAACgB,aAAa,CAAC;MACtC,OAAOA,aAAa;IAEtB,KAAK3B,UAAU;MACbK,KAAK,CAACqB,IAAI,CAAC,yBAAyB,CAAC;MACrC,MAAMG,gBAAgB,GAAG;QACvB,GAAGjB,KAAK;QACRL,IAAI,EAAEK,KAAK,CAACL,IAAI,CAACuB,MAAM,CAAEC,GAAG,IAAKA,GAAG,CAACH,EAAE,KAAKP,MAAM,CAACI,OAAO;MAC5D,CAAC;MACDd,uBAAuB,CAACkB,gBAAgB,CAAC;MACzC,OAAOA,gBAAgB;IAEzB,KAAK5B,aAAa;MAChBI,KAAK,CAAC2B,OAAO,CAAC,wBAAwB,CAAC;MACvC,OAAO;QAAE,GAAGpB,KAAK;QAAEF,OAAO,EAAE,KAAK;QAAEF,OAAO,EAAEa,MAAM,CAACI;MAAQ,CAAC;IAE9D,KAAKvB,aAAa;MAChB,OAAO;QAAE,GAAGU,KAAK;QAAEF,OAAO,EAAE,IAAI;QAAED,KAAK,EAAE;MAAG,CAAC;IAE/C,KAAKN,WAAW;MACdE,KAAK,CAACI,KAAK,CAAC,+BAA+B,CAAC;MAC5C,OAAO;QAAE,GAAGG,KAAK;QAAEF,OAAO,EAAE,KAAK;QAAED,KAAK,EAAEY,MAAM,CAACI;MAAQ,CAAC;IAE5D,KAAKrB,gBAAgB;MACnB,MAAM6B,MAAM,GAAGhB,wBAAwB,CAAC,CAAC;MACzC,IAAI,CAACgB,MAAM,EAAE,OAAOrB,KAAK;MAEzB,OAAO;QAAE,GAAGA,KAAK;QAAEL,IAAI,EAAEU,wBAAwB,CAAC;MAAE,CAAC;IAEvD;MACE,OAAOL,KAAK;EAChB;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}